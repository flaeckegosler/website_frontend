import org.hibernate.EmptyInterceptor;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class QueryExecutionTimeInterceptor extends EmptyInterceptor {

    private static final Logger LOGGER = LoggerFactory.getLogger(QueryExecutionTimeInterceptor.class);
    private long startTime;

    @Override
    public String onPrepareStatement(String sql) {
        startTime = System.currentTimeMillis();
        return super.onPrepareStatement(sql);
    }

    @Override
    public void afterTransactionCompletion(Transaction tx) {
        long elapsedTime = System.currentTimeMillis() - startTime;
        LOGGER.info("Query execution time: {} ms", elapsedTime);
        super.afterTransactionCompletion(tx);
    }
}
